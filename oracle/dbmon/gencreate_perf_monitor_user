#!/bin/ksh
#*****************************************************************************
#
#  This script is used to generate truncate for user 
#
#  USAGE: gencreate_dev_user username
#
#  By Adi Zohar - Feb 2003
#*****************************************************************************
sqlplus "/ as sysdba" <<EOF
set line 132 pages 0 echo on trimspo on
CREATE USER PERF_MONITOR_USER IDENTIFIED BY OZ_50567
  DEFAULT TABLESPACE POOL_DATA   TEMPORARY TABLESPACE TEMP;

  GRANT RESOURCE, CONNECT, SELECT_CATALOG_ROLE TO PERF_MONITOR_USER;
  ALTER USER PERF_MONITOR_USER DEFAULT ROLE ALL;
  ALTER USER PERF_MONITOR_USER QUOTA UNLIMITED ON POOL_DATA;
  ALTER USER PERF_MONITOR_USER IDENTIFIED BY OZ_50567;

CREATE TABLE PERF_MONITOR_USER.MONITORING
(
  SERVER_IP                NUMBER(38)   CONSTRAINT MNTRNG_SERVER_IP_NN NOT NULL,
  TIMESTAMP                VARCHAR2(24) CONSTRAINT MNTRNG_TIMESTAMP_NN NOT NULL,
  USER_ID                  VARCHAR2(8)  CONSTRAINT MNTRNG_USER_ID_NN NOT NULL,
  APPL_SERVER_NAME         VARCHAR2(60) CONSTRAINT MNTRNG_APPL_SERVER_NAME_NN NOT NULL,
  MESSAGE_TYPE             VARCHAR2(1),
  WORKMODE                 VARCHAR2(10),
  USER_IP_ADDRESS          NUMBER(38),
  TRANSACTION_TYPE         VARCHAR2(1),
  TRANSACTION_DESCRIPTION  VARCHAR2(120),
  APP_SERVER_TIME          NUMBER(38),
  TOTAL_SERVER_TIME        NUMBER(38),
  TOTAL_TIME               NUMBER(38),
  OTHER_TIME               NUMBER(38)
)
TABLESPACE POOL_DATA;

CREATE UNIQUE INDEX PERF_MONITOR_USER.MONITORING_PK ON PERF_MONITOR_USER.MONITORING
(SERVER_IP, TIMESTAMP, USER_ID, APPL_SERVER_NAME)
TABLESPACE POOL_DATA;

ALTER TABLE PERF_MONITOR_USER.MONITORING ADD CONSTRAINT MONITORING_PK PRIMARY KEY (SERVER_IP, TIMESTAMP, USER_ID, APPL_SERVER_NAME)
    USING INDEX;

EOF

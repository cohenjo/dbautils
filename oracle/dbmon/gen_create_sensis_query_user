#!/bin/ksh
#*****************************************************************************
#
#  This script is used to generate truncate for user 
#
#  USAGE: gencreate_dev_user username
#
#  By Adi Zohar - Feb 2003
#*****************************************************************************
sqlplus "/ as sysdba" <<EOF
set line 132 pages 0 echo on trimspo on
CREATE USER SENSIS_QUERY_USER
  IDENTIFIED BY SENSIS_QUERY_USER_AJSUEJ
  DEFAULT TABLESPACE POOL_DATA
  TEMPORARY TABLESPACE TEMP
  PROFILE DEFAULT
  ACCOUNT UNLOCK;

  grant CONNECTOR_ROLE to SENSIS_QUERY_USER;
  revoke resource from SENSIS_QUERY_USER;
  ALTER USER SENSIS_QUERY_USER DEFAULT ROLE ALL;
  grant select on v_\$session to SENSIS_QUERY_USER;
  grant select on dba_segments to SENSIS_QUERY_USER;

  -- Normal Access to all Tables

  revoke UPDATE ANY TABLE from SENSIS_QUERY_USER;
  revoke INSERT ANY TABLE from SENSIS_QUERY_USER;
  revoke SELECT ANY TABLE from SENSIS_QUERY_USER;
  revoke DELETE ANY TABLE from SENSIS_QUERY_USER;
  revoke SELECT ANY SEQUENCE from SENSIS_QUERY_USER;
  revoke LOCK ANY TABLE from SENSIS_QUERY_USER;
  revoke NO_TOAD_ROLE from SENSIS_QUERY_USER;
  revoke SELECT_CATALOG_ROLE from SENSIS_QUERY_USER;

-- Grant all Roles
  grant AAM_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant ACMS_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant ADS_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant AFL_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant AUTHWORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant BIL_WORK_MASTER_QUERY_ROLE to SENSIS_QUERY_USER;
  grant BIL_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant CGS_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant CYP_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant DLV_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant DM_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant EAI_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant EPR_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant HM_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant IM_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant NTF_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant PARAM_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant PDLM_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant PD_WORK_MASTER_QUERY_ROLE to SENSIS_QUERY_USER;
  grant PD_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant REFCORE_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant REFWORK_MASTER_QUERY_ROLE to SENSIS_QUERY_USER;
  grant REFWORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant REF_APPL_MASTER_QUERY_ROLE to SENSIS_QUERY_USER;
  grant REF_APPL_QUERY_ROLE to SENSIS_QUERY_USER;
  grant SO_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant RPX_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant SP_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant UAMS_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  grant AFL_WLI_USER_QUERY_ROLE to SENSIS_QUERY_USER;
  grant AFL_WLI_USER_QUERY_ROLE to SENSIS_QUERY_USER;
  grant MONITOR_WORK_QUERY_ROLE to SENSIS_QUERY_USER;
  
  GRANT execute on DBMS_SNAPSHOT to SENSIS_QUERY_USER;

alter user SENSIS_QUERY_USER quota 0 on pool_data;

revoke OP_WORK_QUERY_ROLE from SENSIS_QUERY_USER;

EOF
add_to_alt_user_password.sh SENSIS_QUERY_USER
gencreateappsynonym SENSIS_QUERY_USER


#!/bin/ksh
#*****************************************************************************
#
#  This script is used to show dir        
#
#  USAGE: showdir
#
#  By Adi Zohar - Feb 2003
#*****************************************************************************
sqlplus -s "/ as sysdba" <<EOF
set feed on 
prompt create profile GEN_QUERY
CREATE PROFILE GEN_QUERY LIMIT
  SESSIONS_PER_USER DEFAULT CPU_PER_SESSION 30000 CPU_PER_CALL DEFAULT CONNECT_TIME DEFAULT IDLE_TIME 30 LOGICAL_READS_PER_SESSION 100000 LOGICAL_READS_PER_CALL 30000 COMPOSITE_LIMIT DEFAULT PRIVATE_SGA DEFAULT FAILED_LOGIN_ATTEMPTS DEFAULT PASSWORD_LIFE_TIME DEFAULT PASSWORD_REUSE_TIME DEFAULT PASSWORD_REUSE_MAX DEFAULT PASSWORD_LOCK_TIME DEFAULT PASSWORD_GRACE_TIME DEFAULT PASSWORD_VERIFY_FUNCTION DEFAULT;

-- 30 minutes per connection
ALTER PROFILE GEN_QUERY LIMIT connect_time 30;

-- Allow queries up to 30 seconds 
ALTER PROFILE GEN_QUERY LIMIT cpu_per_call 3000;

-- No limit on per session
ALTER PROFILE GEN_QUERY LIMIT CPU_PER_SESSION unlimited;

-- No limit per session               
ALTER PROFILE GEN_QUERY LIMIT logical_reads_per_session unlimited;

-- Allow max 10 min idle time
ALTER PROFILE GEN_QUERY LIMIT idle_time 10;

-- Max blocks per read = 100000 blocks - changed from 320000
ALTER PROFILE GEN_QUERY LIMIT logical_reads_per_call 100000;

CREATE PROFILE GEN_NOLIMIT LIMIT
  SESSIONS_PER_USER DEFAULT CPU_PER_SESSION DEFAULT CPU_PER_CALL DEFAULT CONNECT_TIME DEFAULT IDLE_TIME 30 LOGICAL_READS_PER_SESSION DEFAULT LOGICAL_READS_PER_CALL DEFAULT COMPOSITE_LIMIT DEFAULT PRIVATE_SGA DEFAULT FAILED_LOGIN_ATTEMPTS DEFAULT PASSWORD_LIFE_TIME DEFAULT PASSWORD_REUSE_TIME DEFAULT PASSWORD_REUSE_MAX DEFAULT PASSWORD_LOCK_TIME DEFAULT PASSWORD_GRACE_TIME DEFAULT PASSWORD_VERIFY_FUNCTION DEFAULT;

-- Allow max 10 min idle time
ALTER PROFILE GEN_NOLIMIT LIMIT idle_time 10;

EOF

